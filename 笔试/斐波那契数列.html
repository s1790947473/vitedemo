<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function fibonacci(n) {
            // 基本情况
            if (n <= 0) return 0;
            if (n === 1) return 1;

            // 递归计算
            return fibonacci(n - 1) + fibonacci(n - 2);
        }

        // 计算第 10 个斐波那契数
        console.time('初始')
        console.log(fibonacci(10));
        console.timeEnd('初始')

        /*  利用栈节省时间，牺牲空间
            L(n) = L(n-1) + L(n-2)
            L(n-1) = L(n-2) + L(n-3)
            ......
            L(2) = L(1) + L(0)
            L(1) = 1
            L(0) = 0
        */
        let stack = {}
        function fi(n) {
            if (n === 0)
                return 0
            if (n === 1)
                return 1
            if (Object.keys(stack).includes(n))
                return stack.n
            let result = fi(n - 1) + fi(n - 2)
            return result
        }

        console.time('优化')
        console.log(fi(10));
        console.timeEnd('优化')

        /* 非递归、迭代实现
            外循环遍历0-n，内循环计算
        */

        function fi_iter(n) {
            // 初始化栈
            let stack_iter = [0, 1]
            // 边界条件
            if (n < 2) {
                return n
            }

            for (let i = 2; i <= n; i++) {
                // stack_iter[i] = stack_iter[i - 1] + stack_iter[i - 2];   最佳做法，因为内循环是固定的n-1,n-2不需要循环
                for (let j = i - 2; j < i - 1; j++) {
                    if (j < i) {
                        stack_iter[i] = stack_iter[j] + stack_iter[j + 1]
                    }
                }
            }
            return stack_iter[n]
        }
        console.time('迭代')
        console.log(fi_iter(10));
        console.timeEnd('迭代')
    </script>
</body>

</html>